<kui-progress-indicator *ngIf="loading"></kui-progress-indicator>
<div class="full-size scroll-y-only" *ngIf="!loading && props">
  <div class="main-content">
    <section class="title center">
      <p>{{props.number}}</p>
      <p class="names">
        <span *ngFor="let author of props.author; let last = last">
          <read-link-value [valueObject]="author" [ontologyInfo]="ontologyInfo"></read-link-value>
          <span *ngIf="!last"> &amp; </span>
        </span>
        to
        <span *ngFor="let recipient of props.recipient; let last = last">
          <read-link-value [valueObject]="recipient" [ontologyInfo]="ontologyInfo"></read-link-value>
          <span *ngIf="!last"> &amp; </span>
        </span>
      </p>
      <p>
        <span *ngIf="props.location">{{props.location}}, </span>

        <span *ngIf="props.date.start">
          {{props.date.start.date | date: props.date.start?.format}}
          <span *ngIf="props.date.start.era">{{props.date.start?.era}}</span>
        </span>
        <span *ngIf="props.date.end">
          - {{props.date.end.date | date: props.date.start?.format}}
          <span *ngIf="props.date.end.era">{{props.date.end?.era}}</span>
        </span>
        <span *ngIf="props.date.start.calendar"> ({{props.date.start?.calendar}})</span>

      </p>
    </section>

    <section class="text">
      <read-text-value-as-html [valueObject]="props.text[0]" [ontologyInfo]="ontologyInfo" [bindEvents]="true"></read-text-value-as-html>
    </section>

    <mat-divider class="divider-letter-metadata"></mat-divider>

    <section class="links">
      <h4 class="subheading-2">{{ontologyInfo?.getLabelForProperty(props?.title[0].propIri)}}</h4>
      <p *ngFor="let title of props.title">{{title.getContent()}}</p>


      <div *ngIf="props.repertorium">
        <p>
          <strong>
            Repertorium number:
          </strong>
          <span>{{props.repertorium}}</span>
        </p>
      </div>

      <div *ngIf="props.figure[0]">
        <h4 class="subheading-2">{{ontologyInfo?.getLabelForProperty(props?.figure[0].propIri)}}</h4>
        <read-link-value *ngFor="let fig of props.figure" [valueObject]="fig" [ontologyInfo]="ontologyInfo"></read-link-value>
      </div>

      <div *ngIf="props.replyTo[0]">
        <h4 class="subheading-2">
          {{ontologyInfo?.getLabelForProperty(props?.replyTo[0].propIri)}}
        </h4>
        <read-link-value *ngFor="let rt of props.replyTo" [valueObject]="rt" [ontologyInfo]="ontologyInfo"></read-link-value>
      </div>

      <div *ngIf="props.original[0]">
        <h4 class="subheading-2">{{ontologyInfo?.getLabelForProperty(props?.original[0].propIri)}}</h4>
        <ul>
          <li *ngFor="let orig of props.original">
            <read-link-value [valueObject]="orig" [ontologyInfo]="ontologyInfo"></read-link-value>
          </li>
        </ul>
      </div>

      <div *ngIf="props.translation[0]">
        <h4 class="subheading-2">{{ontologyInfo?.getLabelForProperty(props?.translation[0].propIri)}}</h4>
        <read-link-value *ngFor="let trans of props.translation" [valueObject]="trans" [ontologyInfo]="ontologyInfo"></read-link-value>
      </div>

      <div *ngIf="props.published[0]">
        <h4 class="subheading-2">{{ontologyInfo?.getLabelForProperty(props?.published[0].propIri)}}</h4>
        <ul>
          <li *ngFor="let pub of props.published">
            <read-link-value [valueObject]="pub" [ontologyInfo]="ontologyInfo"></read-link-value>
          </li>
        </ul>
      </div>

      <div *ngIf="props.language[0]">
        <h4 class="subheading-2">{{ontologyInfo?.getLabelForProperty(props?.language[0].propIri)}}</h4>
        <p *ngFor="let lang of props.language; let last = last">{{lang.getContent()}}
          <span *ngIf="!last">, </span>
        </p>
      </div>

      <div *ngIf="props.subject[0]">
        <h4 class="subheading-2">{{ontologyInfo?.getLabelForProperty(props?.subject[0].propIri)}}</h4>
        <ul>
          <li *ngFor="let subj of props.subject">
            <read-list-value [valueObject]="subj"></read-list-value>
          </li>
        </ul>
      </div>

    </section>

  </div>
</div>