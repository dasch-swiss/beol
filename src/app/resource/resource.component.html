<div class="full-size scroll-y-only">

    <kui-progress-indicator *ngIf="isLoading" [color]="'#D88958'"></kui-progress-indicator>

    <div *ngIf="!isLoading">


        <div class="sidebar">

            <button mat-stroked-button class="previousBtn" (click)="location.back()">
                <mat-icon>arrow_back</mat-icon>
                Previous
            </button>
        </div>

        <div class="main-content">
            <h3 mat-card-subtitle>{{ontologyInfo?.getLabelForResourceClass(resource?.type)}}</h3>
            <h2>{{resource?.label}}</h2>

            <div mat-line *ngFor="let prop of resource?.properties | key">

                <div *ngIf="prop.key === KnoraConstants.hasStillImageFileValue; else noImage">
                    <!-- resource has images attached directly, display them -->

                    <kui-still-image #OSDViewer *ngIf="!isLoading && resource.stillImageRepresentationsToDisplay.length > 0" class="osd-viewer" [images]="resource?.stillImageRepresentationsToDisplay" [imageRangeStart]="0" [imageRangeEnd]="0" [imageChangeInterval]="1">
                    </kui-still-image>
                </div>

                <ng-template #noImage>
                    <!-- resource has no images attached directly -->
                    <span>{{ontologyInfo?.getLabelForProperty(prop.key)}}</span>
                    <ul>
                        <li *ngFor="let val of prop.value | key">
                            <span [ngSwitch]="val.value.getClassName()">
                                <read-text-value-as-html *ngSwitchCase="KnoraConstants.ReadTextValueAsHtml" [valueObject]="val.value" [ontologyInfo]="ontologyInfo" [bindEvents]="true"></read-text-value-as-html>
                                <kui-text-value-as-string *ngSwitchCase="KnoraConstants.ReadTextValueAsString" [valueObject]="val.value"></kui-text-value-as-string>
                                <kui-text-value-as-xml *ngSwitchCase="KnoraConstants.ReadTextValueAsXml" [valueObject]="val.value"></kui-text-value-as-xml>
                                <kui-date-value *ngSwitchCase="KnoraConstants.ReadDateValue" [valueObject]="val.value" [calendar]="true" [era]="true"></kui-date-value>
                                <kui-link-value *ngSwitchCase="KnoraConstants.ReadLinkValue" [valueObject]="val.value" [ontologyInfo]="ontologyInfo" (referredResourceClicked)="resLinkClicked($event)"></kui-link-value>
                                <kui-integer-value *ngSwitchCase="KnoraConstants.ReadIntegerValue" [valueObject]="val.value"></kui-integer-value>
                                <kui-decimal-value *ngSwitchCase="KnoraConstants.ReadDecimalValue" [valueObject]="val.value"></kui-decimal-value>
                                <kui-geometry-value *ngSwitchCase="KnoraConstants.ReadGeomValue" [valueObject]="val.value"></kui-geometry-value>
                                <kui-color-value *ngSwitchCase="KnoraConstants.ReadColorValue" [valueObject]="val.value"></kui-color-value>
                                <kui-uri-value *ngSwitchCase="KnoraConstants.ReadUriValue" [valueObject]="val.value"></kui-uri-value>
                                <kui-boolean-value *ngSwitchCase="KnoraConstants.ReadBooleanValue" [valueObject]="val.value"></kui-boolean-value>
                                <kui-interval-value *ngSwitchCase="KnoraConstants.ReadIntervalValue" [valueObject]="val.value"></kui-interval-value>
                                <read-list-value *ngSwitchCase="KnoraConstants.ReadListValue" [valueObject]="val.value"></read-list-value>
                                <kui-textfile-value *ngSwitchCase="KnoraConstants.TextFileValue" [valueObject]="val.value"></kui-textfile-value>
                                <span *ngSwitchDefault="">Not supported {{val.value.getClassName()}}</span>
                            </span>
                        </li>
                    </ul>
                </ng-template>
            </div>

            <!-- Check for incoming images pointing to this resource -->
            <kui-still-image #OSDViewer class="osd-viewer" *ngIf="resource?.incomingStillImageRepresentations?.length > 0;" (getImages)="changeOffsetForStillImageRepresentations($event)" [images]="resource?.stillImageRepresentationsToDisplay" [imageRangeStart]="0" [imageRangeEnd]="4" [imageChangeInterval]="5">
            </kui-still-image>

            <div *ngIf="resource?.incomingLinks?.length > 0">
                <p>
                    <strong>Incoming Links:</strong>
                </p>
                <mat-list *ngFor="let incomingLinkSourceRes of resource.incomingLinks">
                    <mat-list-item>
                        <span class="link" (click)="showIncomingRes(incomingLinkSourceRes.id, incomingLinkSourceRes.type)">{{incomingLinkSourceRes.label}}</span>
                    </mat-list-item>
                </mat-list>
            </div>
        </div>
    </div>

</div>